% \PassOptionsToPackage{showrules}{blurb}
% \PassOptionsToPackage{showframe}{blurb}
% \PassOptionsToPackage{showbleed}{blurb}
\documentclass[12pt,fleqn]{thesis}
% ENCODING



% **************************************************
% METADATA
% **************************************************
\newcommand\mytitle{Modeling of bending-torsion couplings in active-bending structures. Application to the design of elastic gridshell.}
\newcommand\myauthor{Lionel du Peloux de Saint Romain}
\newcommand\mykeywords{gridshell, active bending, freeform, dynamic relaxation}
\newcommand\myabstract{My abstract.}




\usepackage{dpfloat} % for double page float figures aand tables side by side

% **************************************************
% FIGURES
% **************************************************
% \usepackage[]{graphicx}  % draft = no image
% \usepackage[aboveskip=50pt]{subfig}

% **************************************************
% TABLES
% **************************************************
\usepackage{tabularx}
\usepackage{multirow}
\newcolumntype{Y}{>{\centering\arraybackslash}X}
\newcolumntype{Z}{>{\raggedright\arraybackslash}X}

% l r c coumns width optional fixed with
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}

\usepackage{booktabs}
\newcommand{\ra}[1]{\renewcommand{\arraystretch}{#1}}
\newcommand{\tablebf}{\fontseries{b}\selectfont} % bold font that does not get wider to keep bold numbers aligned

% nomenclature of symbols
% ---------------------------------
% \usepackage[intoc]{nomencl}
% \makenomenclature
% \renewcommand{\nomname}{Index of notation}
% % \usepackage{etoolbox}
% \renewcommand\nomgroup[1]{%
%   \item[\bfseries
%   \ifstrequal{#1}{A}{\texttt{Geometry of smooth curves}}{%
%   \ifstrequal{#1}{B}{\texttt{Curve framing}}{%
%   \ifstrequal{#1}{C}{\texttt{Geometry of discrete curves}}{%
%   \ifstrequal{#1}{D}{\texttt{Motion of rods}}{%
%   \ifstrequal{#1}{E}{\texttt{Properties of rods}}{%
%   \ifstrequal{#1}{F}{\texttt{Mechanics of rods}}{%
%   \ifstrequal{#1}{G}{\texttt{Particle spring system}}{}}}}}}}%
% ]\vspace{12pt}}



% overbar & hat
% -----------------------------------

% old version (renamed bellow)
%\newcommand{\overbar}[1]{\mkern 1.5mu\overline{\mkern-1.5mu#1\mkern-1.5mu}\mkern 1.5mu}

\usepackage{scalerel,stackengine}
\stackMath
\usepackage{verbatimbox} % For \addvbuffer
\usepackage{xparse}
\newlength\glyphwidth
\newlength\widthofx

% over hat

\newsavebox\hatglyphCONTENT
\sbox\hatglyphCONTENT{%
	%% 1ST OPTIONAL ARGUMENT OF \addvbuffer (CROP OFF TOP OF STACKED hat)
	%%	2ND OPTIONAL ARGUMENT OF \addvbuffer (CROP OFF BOTTOM OF STACKED hat)
    	\addvbuffer[-0.05ex -1.1ex]{$\hat{\phantom{.}}$}%
}

%% The floating point parameter scales the hatt glyphs everywhere.
\newcommand\hatglyph{\resizebox{0.6\widthofx}{!}{\usebox{\hatglyphCONTENT}}}
\newcommand\shifthat[2]{%
	%% 1ST ARGUMENT OF \stackengine (GAP BETWEEN GLYPH AND \hatglyph)
    \stackengine{0.2\widthofx}{%
        \SavedStyle#2}{%
        \rule{#1}{0ex}\hatglyph}{O}{c}{F}{T}{S}%
}
\ExplSyntaxOn
\newcommand\relativeGlyphOffset[1]{%
    	% The horizontal offset in arbitrary units that scale with math style.
    \str_case:nnF{#1}{%
        {A}{0.18}%
        {B}{0.1}%
        {W}{0.02}%
        {J}{0.18}%
        {\phi}{0.17}%
        {\varkappa}{0.12}%
        {\vect{\varkappa}}{0.13}% 
        {\vect{\omega}}{0.03}%
        {\mathcal{S}}{0.1}%  
    }{0.05}% Default
}\ExplSyntaxOff
% \hatt{decoratedLetter}[A] will insert the decoratedLetter with the hat
% above it, horizontally adjusted as if the decoratedLetter was an "A".
% If the trailing optional argument is not provided, then it defaults 
% to the decoratedLetter. This way we could do e.g. \hatt{\hatt{A}}[A].
\NewDocumentCommand{\hatt}{mO{#1}}{%
    \ThisStyle{%
        \setlength\glyphwidth{\widthof{$\SavedStyle{}\longleftarrow$}}%
        \setlength\widthofx{\widthof{$\SavedStyle{}x$}}%
        \shifthat{\relativeGlyphOffset{#2}\glyphwidth}{#1}%
  }%
}

% over bar
\usepackage{stmaryrd}
\newsavebox\barglyphCONTENT
\sbox\barglyphCONTENT{%
	%% 1ST OPTIONAL ARGUMENT OF \addvbuffer (CROP OFF TOP OF STACKED bar)
	%%	2ND OPTIONAL ARGUMENT OF \addvbuffer (CROP OFF BOTTOM OF STACKED bar)
    \addvbuffer[-0.05ex -1.35ex]{$\bar{\phantom{.}}$}%
}

%%%% The floating point parameter scales the check glyphs everywhere.
\newcommand\barglyph{\resizebox{0.7\widthofx}{!}{\usebox{\barglyphCONTENT}}}
\newcommand\shiftbar[2]{%
%%%% 1ST ARGUMENT OF \stackengine (GAP BETWEEN GLYPH AND \checkglyph)
    \stackengine{0.2\widthofx}{%
        \SavedStyle#2}{%
        \rule{#1}{0ex}\barglyph}{O}{c}{F}{T}{S}%
}

\NewDocumentCommand{\barr}{mO{#1}}{%
    \ThisStyle{%
        \setlength\glyphwidth{\widthof{$\SavedStyle{}\longleftarrow$}}%
        \setlength\widthofx{\widthof{$\SavedStyle{}x$}}%
        \shiftbar{\relativeGlyphOffset{#2}\glyphwidth}{#1}%
    }%
}

\newcommand{\rconf}[1]{\barr{#1}}


% **************************************************
% COLORS
% **************************************************
% \usepackage{color}
% % PREDIFINED COLORS
% \definecolor{Tblue}{RGB}{104, 135, 255}
% \definecolor{Tred}{RGB}{255, 110, 103}
% \definecolor{Tgreen}{RGB}{147, 250, 103}
% \definecolor{Tgray}{RGB}{184, 184, 184}
% \definecolor{Tdarkgray}{RGB}{56, 56, 56}

% \definecolor{gray2}{cmyk}{0,0,0,0.2}
% \definecolor{gray4}{cmyk}{0,0,0,0.4}
% \definecolor{gray6}{cmyk}{0,0,0,0.6}
% \definecolor{gray8}{cmyk}{0,0,0,0.9}

% \definecolor{gray1}{cmyk}{0,0,0,0.1}
% \definecolor{gray3}{cmyk}{0,0,0,0.3}
% \definecolor{gray5}{cmyk}{0,0,0,0.5}
% \definecolor{gray7}{cmyk}{0,0,0,0.7}
% \definecolor{gray9}{cmyk}{0,0,0,0.9}




\usepackage{kantlipsum}

% **************************************************
% DOCUMENT
% **************************************************
\graphicspath{{./ch7_numeric/img/}{./ch6_kirchhoff/img/}{./ch5_energy/img/}{./ch4_geometry/img/}{./ch3_creteil/img/}{./ch2_gridshell/img/}}
\addbibresource{library.bib}
\begin{document}

% --------------------------
% Front matter
% --------------------------
\frontmatter

% preamble
\setlength{\parskip}{1em}

% \newgeometry{
% 	paperwidth=\@PaperWidth,
% 	paperheight=\@PaperHeight,
% 	inner=\@BleedInnerMargin+\SafeContentInnerMargin,
% 	outer=\@BleedOuterMargin+\SafeContentOuterMargin, 
% 	bottom=\SafeContentBottomMargin+\BleedBottomMargin,
% 	top=\SafeContentTopMargin+\BleedTopMargin,
% 	bindingoffset=0mm,
% }
\input{head/titlepage.tex}
\restoregeometry
\include{_dedication}
\include{_preface}
\include{_abstracts}

% tocloft
\setlength{\parskip}{0em}
% \addtocontents{toc}{\protect\addvspace{1em}}
\tableofcontents
\listoffigures
\listoftables

% --------------------------
% Main matter
% --------------------------
\mainmatter
\setlength{\parskip}{1em}

	\newrefsection

	% \include{ch2_gridshell/twospread}\printbibliography[segment=\therefsegment,heading=subbibliography]
	% % \include{ch2_gridshell/test}\printbibliography[segment=\therefsegment,heading=subbibliography]

	% \part{Fake}
	% \part{Fake}
	% \part{Fake}

	% \part{This is a very long part title}
	% \chapter{With a very veru very very lonnnnnnngg premier chapitre Linel}
	% \section{Une section}
	% \kant[1-10]

	
	% \chapter{Mon premier chapitre Linel}
	% \section{Une section}
	% \kant[1-10]
	
	% \subsection{Une section}
	% \kant[1-10]
	% \subsection{Une section}
	% \kant[1-10]
	% \subsection{Une section}
	% \kant[1-10]

	% \section{Une section}
	% \kant[1-10]
	% \subsection{Une section}
	% \kant[1-10]
	% \subsection{Une section}
	% \kant[1-10]
	% \subsection{Une section}
	% \kant[1-10]

	% \part{Fake}
	% \chapter{Mon premier chapitre Linel}
	% \section{Une section}
	% \kant[1-10]
	% \section{Une deuxième section}
	% \kant[1-2]
	% \section{Une troisième section}
	% \kant[1-2]
	% \chapter{Mon premier chapitre Linel}
	% \section{Une section}
	% \kant[1-10]
	% \section{Une deuxième section}
	% \kant[1-2]
	% \section{Une troisième section}
	% \kant[1-2]
	% \chapter{Mon premier chapitre Linel}
	% \section{Une section}
	% \kant[1-10]
	% \section{Une deuxième section}
	% \kant[1-2]
	% \section{Une troisième section}
	% \kant[1-2]



	\include{ch1_introduction/chapter}
	

	\part{Elastic gridshells}\label{part=1}
	\include{ch2_gridshell/chapter}\printbibliography[segment=\therefsegment,heading=subbibliography]
	% \include{ch3_creteil/chapter}\printbibliography[segment=\therefsegment,heading=subbibliography]

	% \part{Rich Kirchhoff beam model}\label{part=2}
	% \include{ch4_geometry/chapter}\printbibliography[segment=\therefsegment,heading=subbibliography]
	% \include{ch5_energy/chapter}\printbibliography[segment=\therefsegment,heading=subbibliography]
	% \include{ch6_kirchhoff/chapter}\printbibliography[segment=\therefsegment,heading=subbibliography]
	% \include{ch7_numeric/chapter}\printbibliography[segment=\therefsegment,heading=subbibliography]
	% \include{ch8_conclusion/chapter}

% APPENDINX MATTER
% \part{Appendix}	\label{part=3}
% \appendix
% 	\include{ap3_review/appendix}\printbibliography[segment=\therefsegment,heading=subbibliography]
% 	\include{ap1_variational/appendix}\printbibliography[segment=\therefsegment,heading=subbibliography]
% 	\include{ap2_interpolation/appendix}\printbibliography[segment=\therefsegment,heading=subbibliography]

% % BACK MATTER
% \backmatter

% 	% go back to root for bookmarks
% 	\bookmarksetup{startatroot}

% 	% list of notations
% 	\include{_notations}

% 	% general bibliography
% 	\printbibliography[heading=bibintoc]

% 	% personal publications
% 	\newrefsection
% 	\newrefcontext[sorting=ydnt]
% 	\nocite{*}
% 	\printbibliography[heading=bibintoc,title={Publications from the author},keyword=own,env=cvbib]
	

\end{document}
